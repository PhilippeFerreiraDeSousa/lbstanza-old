defpackage stz-test-suite/dev-proj :
  import core
  import collections
  import arg-parser
  import stz/proj

;Read the proj file in the filenames and print it out.
defn read-proj-action (cmdargs:CommandArgs) :
  val filenames = args(cmdargs)
  println("Read %@" % [filenames])
  val platform = to-symbol(get?(cmdargs, "platform", "os-x"))
  val proj = read-proj-files(filenames, platform)
  println(proj)

;Launch!
simple-command-line-cli(false, commands, "read", false, false) where :
  val commands = [
    Command(
      "read", AtLeastOneArg, "the .proj file to read",
      [Flag(
        "platform"
        OneFlag
        OptionalFlag
        "the platform. Either os-x, linux, or windows.")],
      "Read a .proj file and normalize it.",
      read-proj-action)]