############################################################
################ The Development Harness ###################
############################################################

This branch is for developing the Conan package manager integration
using Stanza's 'foreign package manager' API.

How to run:

    cd tests
    stanza repl stz-test-suite/dev-package-manager

It should print out:

    Begin test of package manager.
    Retrieve the configuration parameters.
    Retrieved params:
      FieldType:
        field-name: project-root
        optional?: false
        field-type: ValueType(atom-type = StringType, single? = true)
        field-context: PathField
      FieldType:
        field-name: email
        optional?: true
        field-type: ValueType(atom-type = StringType, single? = true)
        field-context: StandardField
    Retrieve the .proj variables that the package manager supplies.
    The package manager provides these variables:
      CONAN-BUILD-DIR: "mytempdrive/build/mydir/myproject/.conan/build"
      CONAN-INCLUDES: ("-lCONAN" "-lCONANHOME")
    Based upon the params retrieve the additional dependencies from the package manager:
    The package manager introduces dependencies:
      ccfiles: []
      ccflags: ["-L@buildargs"]
    Suppose that dependencies have now been calculated.
    Request the package manager to satisfy the following dependencies.
      packages = ["gzip/11.2.3" "simlib/v2" "jitx/0.0.13-rc1"]
    SYSTEM: call-system(["conan" "--init" "--root" "mytempdrive/build/mydir/myproject"])
    SYSTEM: call-system(["conan" "update" "gzip/11.2.3"])
    SYSTEM: call-system(["conan" "update" "simlib/v2"])
    SYSTEM: call-system(["conan" "update" "jitx/0.0.13-rc1"])

What to implement:

    compiler/conan-package-manager.stanza: This file contains the main implementation
    of the conan package manager integration. Some example stubs are provided.

    tests/dev-package-manager.stanza: This file contains a test harness that
    pokes and drives the conan package manager. You will have to modify this
    harness to poke the package manager in the desired way.

Details:

    This is an initial API proposal for the foreign package manager.
    Please let me know if there are additional hooks that are needed.

    The package manager is provided a System object for performing a
    small number of operations with the system. Let me know if this
    needs to be extended.

############################################################
#################### System Integration ####################
############################################################

The support for foreign package managers has now been fully integrated into the main compiler. There is an example manager called `ExamplePackageManager` that is registered with the main compiler via the file `built-in-package-managers.stanza`. 

After the Conan package manager is fleshed out, it can be registered in the same way. 

Here is how you can compile Stanza and try out the example package manager.

1) Make the following edit to `stanzarepo/stanza.proj`:

   ;Add this line at the top.
   include "build-stanza.proj"

2) Build the compiler.

   cd stanzarepo
   stanza build

3) Try compiling the example project.

   cd stanzarepo/tests/exampletest01
   ../../stanza example-test/main -o example-program

   It should print out the following:

   EXAMPLE: Simulate a build in root directory "/Users/patricksli/Docs/Programming/stanzadev/tests/exampletest01"
   User email: "patrick@li.com"
   Retrieve foreign package: "EM/BLIB-V2"
   Retrieve foreign package: "EM/STDWINDOWING-V3"
   Retrieve foreign package: "EM/ALIB-V1"
   Retrieve foreign package: "EM/STDLIB-V0"
